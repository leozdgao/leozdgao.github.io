<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>IP协议相关技术 | Leo.Gao</title>
  <meta name="author" content="Leo Gao">
  
  <meta name="description" content="DNS（Domain Name System）直接使用IP地址有诸多不便，而DNS系统是一个可以有效管理主机名和IP地址之间对应关系的系统。
域名是指为了识别主机名称和组织机构名称的一种具有分层的名称。域名服务器是指管理域名的主机和相应的软件，它可以管理所在分层的域的相关信息。根部所设置的DNS叫做根域名服务器，根域名服务器中注册着根以下第一层域名服务器的IP地址，类似地，在根域名服务器的下一层域名服务器中注册了再往下一层域名服务器的IP地址。
DNS查询：为了调查IP地址，向本机注册的域名服务器进行查询处理，接收请求的域名服务器首先会先在自己的数据库进行查找，如果查到结果，就返回对应的IP地址，如果没有，则域名服务器再向上一层域名服务器进行查询，直到查询到指定的域名服务器并由这个域名服务器返回想要的数据。解析器和域名服务器将最新了解到的信息暂时保存在缓存里以减少每次查询时的性能消耗。">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="IP协议相关技术"/>
  <meta property="og:site_name" content="Leo.Gao"/>

  
    <meta property="og:image" content="undefined"/>
  
  <meta name="baidu-site-verification" content="KFPqVnQyRU" />
  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Leo.Gao" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Leo.Gao</a></h1>
  <h2><a href="/">不积跬步无以至千里</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">主页</a></li>
    
      <li><a href="/archives">文章列表</a></li>
    
      <li><a href="/about">关于作者</a></li>
    
      <li><a href="/atom.xml">RSS</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-02-20T03:29:39.000Z"><a href="/2015/02/20/IP协议相关技术/">2015-02-20</a></time>
      
      
  
    <h1 class="title">IP协议相关技术</h1>
  

    </header>
    <div class="entry">
      
        <h2 id="DNS（Domain_Name_System）">DNS（Domain Name System）</h2><p>直接使用IP地址有诸多不便，而DNS系统是一个可以有效管理主机名和IP地址之间对应关系的系统。</p>
<p><strong>域名</strong>是指为了识别主机名称和组织机构名称的一种具有分层的名称。<strong>域名服务器</strong>是指管理域名的主机和相应的软件，它可以管理所在分层的域的相关信息。根部所设置的DNS叫做根域名服务器，根域名服务器中注册着根以下第一层域名服务器的IP地址，类似地，在根域名服务器的下一层域名服务器中注册了再往下一层域名服务器的IP地址。</p>
<p>DNS查询：为了调查IP地址，向本机注册的域名服务器进行查询处理，接收请求的域名服务器首先会先在自己的数据库进行查找，如果查到结果，就返回对应的IP地址，如果没有，则域名服务器再向上一层域名服务器进行查询，直到查询到指定的域名服务器并由这个域名服务器返回想要的数据。解析器和域名服务器将最新了解到的信息暂时保存在缓存里以减少每次查询时的性能消耗。</p>
<a id="more"></a>
<p>DNS不仅仅管理主机名和IP地址的映射关系，还有众多其他信息：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>编号</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>1</td>
<td>主机名的IP地址（IPv4）</td>
</tr>
<tr>
<td>NS</td>
<td>2</td>
<td>域名服务器</td>
</tr>
<tr>
<td>CNAME</td>
<td>5</td>
<td>主机别名对应的规范名称</td>
</tr>
<tr>
<td>SOA</td>
<td>6</td>
<td>区域内权威记录起始标志</td>
</tr>
<tr>
<td>WKS</td>
<td>11</td>
<td>已知的服务</td>
</tr>
<tr>
<td>PTR</td>
<td>12</td>
<td>IP地址反向解析</td>
</tr>
<tr>
<td>HINFO</td>
<td>13</td>
<td>主机相关的追加信息</td>
</tr>
<tr>
<td>MINFO</td>
<td>14</td>
<td>邮箱与邮件组信息</td>
</tr>
<tr>
<td>MX</td>
<td>15</td>
<td>邮件交换</td>
</tr>
<tr>
<td>TXT</td>
<td>16</td>
<td>文本</td>
</tr>
<tr>
<td>SIG</td>
<td>24</td>
<td>安全证书</td>
</tr>
<tr>
<td>KEY</td>
<td>25</td>
<td>密钥</td>
</tr>
<tr>
<td>GPOS</td>
<td>27</td>
<td>地理位置</td>
</tr>
<tr>
<td>AAAA</td>
<td>28</td>
<td>主机的IPv6地址</td>
</tr>
<tr>
<td>NXT</td>
<td>30</td>
<td>下一代域名</td>
</tr>
<tr>
<td>SRV</td>
<td>33</td>
<td>服务器选择</td>
</tr>
<tr>
<td>*</td>
<td>255</td>
<td>所有缓存记录</td>
</tr>
</tbody>
</table>
<h2 id="ARP（Address_Resolution_Protocol）">ARP（Address Resolution Protocol）</h2><p>ARP是一种解决地址问题的协议，以目标IP地址为线索，用来定位下一个应该接受数据分包的网络设备对应的MAC地址。如果目标主机不在同一个链路上，则通过ARP查找下一跳路由器的MAC地址。</p>
<p>ARP工作机制：起初要通过广播发送一个ARP请求包，这个包包含了想要了解其MAC地址的IP地址。如果ARP请求包中的目标IP地址与自己的IP地址一致，那么这个节点就将自己的MAC地址塞入ARP响应包返回给主机。第一次通过ARP请求获取到的MAC地址作为IP对MAC的映射关系记忆到一个ARP缓存表中，反之，接收ARP请求的那个主机又可以从这个ARP请求包获取发送端主机的IP地址及其MAC地址并记入缓存，以提高效率。</p>
<p>RARP（Reverse Address Resolution Protocol）是将ARP反过来，根据MAC地址定位IP地址的一种协议。为此需要架设一台RARP服务器，在这个服务器上注册设备的MAC地址及其IP地址。然后再将这个设备接入到网络时，会发送RARP请求，RARP服务器接收到后，返回相应的注册信息。</p>
<p>ARP只适用于IPv4，不能用于IPv6，IPv6中可以用ICMPv6替代ARP发送邻居探索消息。</p>
<h2 id="ICMP">ICMP</h2><p>ICMP的主要功能包括确认IP包是否成功送达目标地址，通知在发送过程当中IP包被废弃的具体原因，改善网络设置等。在IP通信中如果某个IP包因为某种原因未能达到目标地址，那么这个具体的原因将由ICMP负责通知，ICMP的通知消息会使用IP进行发送。</p>
<p>ICMP消息类型：</p>
<table>
<thead>
<tr>
<th>类型（十进制数）</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>回送应答</td>
</tr>
<tr>
<td>3</td>
<td>目标不可达</td>
</tr>
<tr>
<td>4</td>
<td>原点抑制</td>
</tr>
<tr>
<td>5</td>
<td>重定向或改变路由</td>
</tr>
<tr>
<td>8</td>
<td>回送请求</td>
</tr>
<tr>
<td>9</td>
<td>路由器公告</td>
</tr>
<tr>
<td>10</td>
<td>路由器请求</td>
</tr>
<tr>
<td>11</td>
<td>超时</td>
</tr>
<tr>
<td>17</td>
<td>地址子网请求</td>
</tr>
<tr>
<td>18</td>
<td>地址子网应答</td>
</tr>
</tbody>
</table>
<p><strong>ICMPv6</strong>：在IPv6中，ICMP的作用被扩大，IP地址定位MAC地址的协议从ARP转为ICMP的邻居探索消息。这种邻居探索消息融合了IPv4的ARP、ICMP重定向以及ICMP路由器选择消息等功能于一体。邻居请求消息利用IPv6的多播地址，查询IPv6的地址与MAC地址的对应关系，并由邻居宣告消息得知MAC地址。</p>
<h2 id="DHCP（Dynamic_Host_Configuration_Protocol）">DHCP（Dynamic Host Configuration Protocol）</h2><p>DHCP用于自动设置IP地址、统一管理IP地址分配。使用DHCP之前，首先要架设一台DHCP服务器（通常该网段的路由器充当了DHCP服务器）。然后将DHCP要分配的IP地址、子网掩码、路由控制信息以及DNS服务器地址等设置到服务器上。</p>
<p>DHCP工作机制：首先DHCP客户端发送DHCP发现包要求设置IP地址和子网掩码，接下来DHCP服务器发送DHCP提供包通知其可以使用的网络设置，然后客户端发送DHCP请求包通知想要使用之前返回的网络设置，最后服务器发送DHCP提供包通知允许其设置。</p>
<p>为了检查所要分配的IP地址以及分配了的IP地址是否可用，需要具备以下功能：</p>
<ul>
<li>DHCP服务器：在分配IP底之前发送ICMP回送请求包，确认没有返回应答。</li>
<li>DHCP客户端：针对从DHCP那里获得的IP地址发送ARP请求包，确认没有返回应答。</li>
</ul>
<p><strong>DHCP中继代理</strong>对不同网段的IP地址分配也可以由一个DHCP服务器统一进行管理和运维。</p>
<h2 id="NAT（Network_Address_Translator）">NAT（Network Address Translator）</h2><p>用于在本地网络中使用私有地址，在连接互联网时转而使用全局IP地址的技术。除了转换IP地址外，还出现了可以转换TCP、UDP端口号的<strong>NAPT</strong>技术。</p>
<p>NAT工作机制：利用NAT，途中的NAT路由器将发送源地址转换为全局IP地址再发送数据，反之，当包从发过来时，目标地址先被转换成私有IP地址以后再被转发。</p>
<h2 id="IP隧道">IP隧道</h2><p>在网络层的首部后面继续追加网络层首部的通信方式叫做IP隧道。</p>
<p><strong>Mobile IP</strong>在主机所连接的子网IP发生变化时，主机IP地址仍保持不变，即使在IP地址发生变化的环境下，通信也能够继续。Mobile IP中的移动主机，在移动之前按照以往的模式进行通信，而移动之后则通过外部代理发送转发数据包向归属代理通知自己的地址。通信对端主机在目标主机移动后，发送ARP消息，并接收以移动主机为目标地址的数据包，归属代理采用IP隧道转发给移动主机，外部代理将IP头删除还原为原始数据包。</p>
<h2 id="其他IP相关技术">其他IP相关技术</h2><ul>
<li><p>IP多播相关技术<br>IGMP（MLD）用于多播过程中确认接收端，主要有两大作用：</p>
<ol>
<li>向路由器表明想要接收多播消息并通知想接收多播的地址。</li>
<li>向交换集线器通知想要接收多播的地址。</li>
</ol>
</li>
<li><p>IP任播<br>IP任播是指为那些提供同一种服务的服务器配置同一个IP地址，并与最近的服务器进行通信的一种方法，适用于IPv4和IPv6。</p>
</li>
</ul>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/net/">计算机网络基础</a>
  </div>

        
        <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
<section id="comment">
  <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="2015/02/20/IP协议相关技术/" data-title="IP协议相关技术" data-url="http://leozdgao.github.io/2015/02/20/IP协议相关技术/"></div>
  <!-- 多说评论框 end -->
  <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
  <script type="text/javascript">
  var duoshuoQuery = {short_name:"leozdgao"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0] 
       || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
  <!-- 多说公共JS代码 end -->

</section>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//baidu.com/baidu" method="get" accept-charset="utf-8">
    <input type="search" name="word" results="0" placeholder="搜索">
    <input type="hidden" name="si" value="site:leozdgao.github.io">
    <input name=tn type=hidden value="bds">
	<input name=cl type=hidden value="3">
	<input name=ct type=hidden value="2097152">
	<input name=s type=hidden value="on">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/HTML-CSS/">HTML/CSS</a><small>1</small></li>
  
    <li><a href="/categories/jslibs/">JS类库探索</a><small>2</small></li>
  
    <li><a href="/categories/jsbasic/">Javascript基础</a><small>2</small></li>
  
    <li><a href="/categories/os/">操作系统基础</a><small>1</small></li>
  
    <li><a href="/categories/net/">计算机网络基础</a><small>6</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li class="categories"><a href="/tags/css/">css</a><small>1</small></li>
  
    <li class="categories"><a href="/tags/git/">git</a><small>1</small></li>
  
    <li class="categories"><a href="/tags/javascript/">javascript</a><small>1</small></li>
  
    <li class="categories"><a href="/tags/javascript-ES6/">javascript, ES6</a><small>1</small></li>
  
    <li class="categories"><a href="/tags/linux/">linux</a><small>1</small></li>
  
    <li class="categories"><a href="/tags/react-js/">react.js</a><small>2</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 Leo Gao
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e1381102438d38c83d913131ba0400b0";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</body>
</html>