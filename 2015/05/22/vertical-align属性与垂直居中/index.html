<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>vertical-align属性与垂直居中 | Leo.Gao</title>
  <meta name="author" content="Leo Gao">
  
  <meta name="description" content="让元素居中对齐是非常常见的需求，首先是水平居中，要实现水平居中行内元素只需要在其父元素上设置text-align: center即可，对于块级元素来说让它的margin-left: auto和margin-right: auto即可（width不可为auto），那么垂直居中呢？找下css属性发现了vertical-align，感觉就是它了，设置个vertical-align: middle，怎么没有达到预期效果？下面来详细介绍下vertical-align这个属性以及实现垂直居中的若干方法。
vertical-align属性是干什么的根据W3C Spec中对vertical-align属性的定义：

This property affects the vertical positioning inside a line box of the boxes generated by an inline-level element.

什么是line box？同样来自W3C Spec

The rectangular area that contains the boxes that form a line is called a line box.

这个属性仅影响了单行中行内元素的垂直位置，那么我们会涉及到的元素应该是这样的：

inline

inline-block


既然我们要垂直居中，垂直居中是相对于垂直高度而言的，然而我们知道height对inline元素无效，那么line box的高度是怎么计算的呢？（还是引用W3C Spec）

The height of a line box is determined by the rules given in the section on line height calculations.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="vertical-align属性与垂直居中"/>
  <meta property="og:site_name" content="Leo.Gao"/>

  
    <meta property="og:image" content="undefined"/>
  
  <meta name="baidu-site-verification" content="KFPqVnQyRU" />
  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Leo.Gao" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Leo.Gao</a></h1>
  <h2><a href="/">不积跬步无以至千里</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">主页</a></li>
    
      <li><a href="/archives">文章列表</a></li>
    
      <li><a href="/about">关于作者</a></li>
    
      <li><a href="/atom.xml">RSS</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2015-05-22T15:52:49.000Z"><a href="/2015/05/22/vertical-align属性与垂直居中/">2015-05-22</a></time>
      
      
  
    <h1 class="title">vertical-align属性与垂直居中</h1>
  

    </header>
    <div class="entry">
      
        <p>让元素居中对齐是非常常见的需求，首先是水平居中，要实现水平居中行内元素只需要在其父元素上设置<code>text-align: center</code>即可，对于块级元素来说让它的<code>margin-left: auto</code>和<code>margin-right: auto</code>即可（width不可为auto），那么垂直居中呢？找下css属性发现了<code>vertical-align</code>，感觉就是它了，设置个<code>vertical-align: middle</code>，怎么没有达到预期效果？下面来详细介绍下<code>vertical-align</code>这个属性以及实现垂直居中的若干方法。</p>
<h2 id="vertical-align属性是干什么的">vertical-align属性是干什么的</h2><p>根据<a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-vertical-align" target="_blank" rel="external">W3C Spec</a>中对<code>vertical-align</code>属性的定义：</p>
<blockquote>
<p>This property affects the vertical positioning inside a line box of the boxes generated by an inline-level element.</p>
</blockquote>
<p>什么是line box？同样来自<a href="http://www.w3.org/TR/2011/REC-CSS2-20110607/visuren.html#inline-formatting" target="_blank" rel="external">W3C Spec</a></p>
<blockquote>
<p>The rectangular area that contains the boxes that form a line is called a line box.</p>
</blockquote>
<p>这个属性仅影响了单行中行内元素的垂直位置，那么我们会涉及到的元素应该是这样的：</p>
<ul>
<li><p>inline</p>
</li>
<li><p>inline-block</p>
</li>
</ul>
<p>既然我们要垂直居中，垂直居中是相对于垂直高度而言的，然而我们知道<code>height</code>对inline元素无效，那么line box的高度是怎么计算的呢？（还是引用W3C Spec）</p>
<blockquote>
<p>The height of a line box is determined by the rules given in the section on line height calculations.</p>
</blockquote>
<a id="more"></a>
<p>一个line box的高度是的计算方式如下：line box中的每一个行内元素都将加入到计算过程，如果是元素<code>inline</code>的则取其<code>line-height</code>的值，如果元素是<code>inline-block</code>或者是<code>inline-table</code>则取其margin-box的高度，最后这些值的最大值，即为line box的高度了。</p>
<p>好了，然后来看看<code>vertical-align</code>属性可以取哪些值：</p>
<p>| 可取值 | 说明 |</p>
<p>|———-|———|</p>
<p>| baseline|将元素的基线与父元素的基线对齐|</p>
<p>| middle|将元素的中线与父元素的基线加上x一半的高度对齐|</p>
<p>| sub|将元素置于基线下方合适的位置|</p>
<p>| super|将元素置于基线上方合适的位置|</p>
<p>| text-top|将元素的顶部与父元素正文区域的顶部对齐|</p>
<p>| text-bottom|将元素的底部与父元素的正文区域的底部对齐|</p>
<p>| top|将元素的顶部与line box顶部对齐|</p>
<p>| bottom|将元素的底部与line box底部对齐|</p>
<p>| &lt; percentage &gt;|基于基线上（正值）下（负值）移动元素，值通过百分比乘上行高而得|</p>
<p>| &lt; length &gt;|基于基线上（正值）下（负值）移动元素|</p>
<p>这里有两个概念：基线（baseline）和正文区域（content area）。</p>
<p>先来感受下，举个栗子：</p>
<p><a href="https://jsfiddle.net/leozdgao/y4oexshn/6/" target="_blank" rel="external">https://jsfiddle.net/leozdgao/y4oexshn/6/</a></p>
<p>在第一个栗子中，直观地展示了<code>vertical-align</code>属性所有可取属性的表现。</p>
<p>在第二个栗子中，蓝色的线表示的就是基线（记得小时候英语练习本每行的第三根线么），绿色的轮廓表示的就是正文区域，这里故意加了个较大的行高，于是红色的轮廓表示的就是line box的轮廓了。</p>
<p>对于有正文的行内元素而言，它的基线正如上面的栗子中所展示的那样，那么对于没有正文的行内元素（这里指的是有大小的inline-block元素但没有正文或者类似与<code>img</code> <code>video</code>这样的replaced element），它们的基线位于它们margin box的底部。</p>
<p>我们发现在这些可取的值中，大部分都与它们的父元素（通常为line box）的基线有关，那么line box的基线在哪里？或者栗子里的蓝线是根据什么画出来的？在W3C Spec中是这样说的：</p>
<blockquote>
<p>CSS 2.1 does not define the position of the line box’s baseline</p>
</blockquote>
<p>是的，没有定义……不过好在浏览器之间的实现似乎没有什么区别，取的就是正常的一个文本的基线位置，这里就不再多纠结line box的基线是怎么计算的了。</p>
<p>这里额外说明下<code>vertical-align: middle</code>，根据上面的解释，什么是父元素的基线加上x一半的高度？还是来看个直观的栗子： </p>
<p><a href="https://jsfiddle.net/leozdgao/hf3ocgd8/2/" target="_blank" rel="external">https://jsfiddle.net/leozdgao/hf3ocgd8/2/</a></p>
<p>蓝色的线依然表示基线，橙色的线表示的就是所谓的line box的基线加上x一半高度的位置。同时也展示了为什么仅给元素设置<code>vertical-align: middle</code>是没有办法达到效果的。</p>
<p>不过line box的基线并不是固定不动的，这次用一个实际的栗子来解释，比如在单行中有一张图片和一段文本，我们的需求是让文字垂直居中对齐：（我用一个<code>inline-block</code>的方块来模拟一张图片）</p>
<p><a href="https://jsfiddle.net/leozdgao/pe8t1LLf/1/" target="_blank" rel="external">https://jsfiddle.net/leozdgao/pe8t1LLf/1/</a></p>
<p>第一个case是没有设置<code>vertical-align</code>时的样子，我们现在知道将文字部分设置<code>vertical-align: middle</code>是不正确的。在第二个case展示了在图片上应用<code>vertical-align: middle</code>，我们发现，为了满足图片中线与line box基线加上半个x高度的位置对齐，而图片位置不能移动了（整个line box就是它撑起来的），所以line box的基线被调整了。那么现在看上去好像是居中了？其实还是差一点，如case3中那样，这时将<code>vertical-align: middle</code>应用与文本上，就可以垂直居中了。</p>
<p>由此我们得到的结论是：对于那些直接影响着line box高度的行内元素来说，<code>vertical-align</code>对元素本身可能无影响，但会调整line box的基线。</p>
<h2 id="垂直居中的若干种方法">垂直居中的若干种方法</h2><p>垂直居中的需求往往并不限于单行文本，可能会设计多行文本，或者多行文本配图片等等，下面整理的各种垂直居中的方案，并试着分析其优劣。</p>
<p><strong>方法一：</strong></p>
<p>将<code>line-height</code>设置为和<code>height</code>一样高，常用于导航栏或者标签页这样的单行文本居中，缺点是这种方法只能用于单行文本，如果还涉及到图片，可以根据上面一部分中提到的方法调整。</p>
<p><a href="https://jsfiddle.net/leozdgao/150et323/" target="_blank" rel="external">https://jsfiddle.net/leozdgao/150et323/</a></p>
<p><strong>方法二：</strong></p>
<p>利用css table，设置元素table结构，并应用<code>vertical-align: middle</code>实现垂直居中，这种方法的实现可用于多行文本，要求IE8及以上版本。</p>
<p><a href="http://jsfiddle.net/leozdgao/00dgdbem/" target="_blank" rel="external">http://jsfiddle.net/leozdgao/00dgdbem/</a></p>
<p><strong>方法三：</strong></p>
<p>上下设置等高的<code>padding</code>或者<code>margin</code>值，个人觉得最笨的一种方法，唯一的优点是兼容所有浏览器，缺点是很不灵活，大小需要额外计算并写死。（不提供栗子）</p>
<p><strong>方法四：</strong></p>
<p>绝对定位，这种方法并不仅限于『居中』，一种是利用负的<code>margin</code>值来实现，另一种是用CSS3的<code>translate</code>来实现，优点的话同样是可以支持多行文本，只是负的<code>margin</code>会写死大小，仅适合与大小固定的元素，用<code>translate</code>要考虑css3的浏览器兼容问题，最大的局限性是绝对定位本身导致元素脱离文本流<code>normal flow</code>，多数情况下其父元素仅包括它一个子元素时会使用。</p>
<p><a href="http://jsfiddle.net/leozdgao/h34zqLf2/1/" target="_blank" rel="external">http://jsfiddle.net/leozdgao/h34zqLf2/1/</a></p>
<p>补充：支持CSS3的浏览器，也可以使用<code>calc</code>，像这样使用：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">top: calc(50% - (300px / 2));</span><br></pre></td></tr></table></figure>
<p><strong>方法五：</strong></p>
<p>同样是绝对定位，这个方法一般被称为<code>Stretching</code>，把4个定位方向全部设置为0，这种方式不会将大小写死，浏览器兼容性也很不错，但绝对定位的弊端上面也已经提到过了。</p>
<p><a href="http://jsfiddle.net/leozdgao/5a9z676h/1/" target="_blank" rel="external">http://jsfiddle.net/leozdgao/5a9z676h/1/</a></p>
<p>这里简单解释下实现原理：我们发现了<code>margin: auto</code>，是的，我们给4个方向全部设置为0，即为元素提供了与其父元素相同的外边缘。接下来看<a href="http://www.w3.org/TR/2011/REC-CSS2-20110607/visudet.html#abs-non-replaced-height" target="_blank" rel="external">W3C Spec</a>中提到的：</p>
<blockquote>
<p>If none of the three are ‘auto’: If both ‘margin-top’ and ‘margin-bottom’ are ‘auto’, solve the equation under the extra constraint that the two margins get equal values.</p>
</blockquote>
<p>这是就垂直方向而言的：其中的<code>three</code>指的是<code>top</code> <code>height</code> <code>bottom</code>，就是<code>margin</code>值的计算结果会让元素尽可能居中。水平方向同理。</p>
<p><strong>方法六：</strong></p>
<p>隐藏一个浮动元素，这个浮动元素占父元素一半的高度，然后需要垂直居中的元素设置清除浮动，并设置大小为其高度一半的负<code>margin-top</code>，这个方法兼容任何浏览器，但总感觉有点hack的意味，不推荐。</p>
<p><a href="http://jsfiddle.net/leozdgao/zoft69ao/1/" target="_blank" rel="external">http://jsfiddle.net/leozdgao/zoft69ao/1/</a></p>
<p><strong>方法七：</strong></p>
<p>FlexBox布局，浏览器需要支持，在移动端可大肆使用。</p>
<p><a href="http://jsfiddle.net/leozdgao/4my89br7/1/" target="_blank" rel="external">http://jsfiddle.net/leozdgao/4my89br7/1/</a></p>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/css/">css</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/HTML-CSS/">HTML/CSS</a>
  </div>

        <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
<section id="comment">
  <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="2015/05/22/vertical-align属性与垂直居中/" data-title="vertical-align属性与垂直居中" data-url="http://leozdgao.github.io/2015/05/22/vertical-align属性与垂直居中/"></div>
  <!-- 多说评论框 end -->
  <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
  <script type="text/javascript">
  var duoshuoQuery = {short_name:"leozdgao"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0] 
       || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
  <!-- 多说公共JS代码 end -->

</section>


</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//baidu.com/baidu" method="get" accept-charset="utf-8">
    <input type="search" name="word" results="0" placeholder="搜索">
    <input type="hidden" name="si" value="site:leozdgao.github.io">
    <input name=tn type=hidden value="bds">
	<input name=cl type=hidden value="3">
	<input name=ct type=hidden value="2097152">
	<input name=s type=hidden value="on">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/HTML-CSS/">HTML/CSS</a><small>1</small></li>
  
    <li><a href="/categories/HTML5/">HTML5</a><small>1</small></li>
  
    <li><a href="/categories/jslibs/">JS类库探索</a><small>2</small></li>
  
    <li><a href="/categories/jsbasic/">Javascript基础</a><small>4</small></li>
  
    <li><a href="/categories/css/">css</a><small>1</small></li>
  
    <li><a href="/categories/os/">操作系统基础</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li class="categories"><a href="/tags/BOM/">BOM</a><small>1</small></li>
  
    <li class="categories"><a href="/tags/ES6/">ES6</a><small>1</small></li>
  
    <li class="categories"><a href="/tags/HTML-CSS/">HTML/CSS</a><small>1</small></li>
  
    <li class="categories"><a href="/tags/css/">css</a><small>1</small></li>
  
    <li class="categories"><a href="/tags/git/">git</a><small>1</small></li>
  
    <li class="categories"><a href="/tags/javascript/">javascript</a><small>4</small></li>
  
    <li class="categories"><a href="/tags/linux/">linux</a><small>1</small></li>
  
    <li class="categories"><a href="/tags/react-js/">react.js</a><small>2</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 Leo Gao
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e1381102438d38c83d913131ba0400b0";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</body>
</html>